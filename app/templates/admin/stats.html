<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê´€ë¦¬ì í†µê³„</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
{% include 'layout/header.html' %}
<main class="container mx-auto px-4 py-6">
  <h1 class="text-2xl font-bold mb-6">ğŸ“Š ê´€ë¦¬ì í†µê³„ ëŒ€ì‹œë³´ë“œ</h1>

  <!-- ì „ì²´ ìš”ì•½ í†µê³„ -->
  <section class="mb-8">
    <h2 class="text-xl font-semibold mb-3">1. ì „ì²´ ìš”ì•½ í†µê³„</h2>
    <div class="bg-gray-50 border rounded p-4">
      <ul class="list-disc pl-6 space-y-1">
        <li>ì´ ë¦¬í¬íŠ¸ ìˆ˜: <span class="font-medium">{{ total_reports }}</span></li>
        <li>ìµœê·¼ 7ì¼ ì‹ ê·œ ë¦¬í¬íŠ¸: <span class="font-medium">{{ recent_7 }}</span>ê±´</li>
        <li>ìµœê·¼ 30ì¼ ì‹ ê·œ ë¦¬í¬íŠ¸: <span class="font-medium">{{ recent_30 }}</span>ê±´</li>
      </ul>
    </div>
  </section>

  <!-- ê¸°ì—…ë³„ ë¦¬í¬íŠ¸ í˜„í™© -->
  <section class="mb-8">
    <h2 class="text-xl font-semibold mb-3">2. ê¸°ì—…ë³„ ë¦¬í¬íŠ¸ í˜„í™©</h2>
    <div class="overflow-x-auto">
      <table class="table-auto w-full border text-center">
        <thead class="bg-gray-100">
          <tr>
            <th class="border px-2 py-2">ê¸°ì—…ëª…</th>
            <th class="border px-2 py-2">ì‘ì—…</th>
            <th class="border px-2 py-2">ì¥ì• </th>
            <th class="border px-2 py-2">ì¼ì§€</th>
            <th class="border px-2 py-2">ì´í•©</th>
          </tr>
        </thead>
        <tbody>
          {% for client, counts in client_summary.items() %}
          <tr class="border-t">
            <td class="border px-2 py-2">{{ client }}</td>
            <td class="border px-2 py-2">{{ counts.msp }}</td>
            <td class="border px-2 py-2">{{ counts.error }}</td>
            <td class="border px-2 py-2">{{ counts.log }}</td>
            <td class="border px-2 py-2">{{ counts.msp + counts.error + counts.log }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>

  <!-- ë‹´ë‹¹ìë³„ ì²˜ë¦¬ í˜„í™© -->
  <section class="mb-8">
    <h2 class="text-xl font-semibold mb-3">3. ë‹´ë‹¹ìë³„ ì²˜ë¦¬ í˜„í™©</h2>
    <div class="overflow-x-auto">
      <table class="table-auto w-full border text-center">
        <thead class="bg-gray-100">
          <tr>
            <th class="border px-2 py-2">ë‹´ë‹¹ì</th>
            <th class="border px-2 py-2">ì²˜ë¦¬ ìˆ˜</th>
            <th class="border px-2 py-2">ì™„ë£Œìœ¨</th>
          </tr>
        </thead>
        <tbody>
          {% for manager, data in manager_counts.items() %}
          <tr class="border-t">
            <td class="border px-2 py-2">{{ manager }}</td>
            <td class="border px-2 py-2">{{ data.count }}</td>
            <td class="border px-2 py-2">
              {{ '%.0f' % ((data.done / data.count) * 100) if data.count > 0 else '0' }}%
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>

  <!-- ìƒíƒœë³„ ë¦¬í¬íŠ¸ ë¶„í¬ -->
  <section class="mb-8">
    <h2 class="text-xl font-semibold mb-3">4. ìƒíƒœë³„ ë¦¬í¬íŠ¸ ë¶„í¬</h2>
    <div class="bg-gray-50 border rounded p-4">
      <ul class="list-disc pl-6 space-y-1">
        {% for status, count in status_counts.items() %}
          <li>{{ status }}: <span class="font-medium">{{ count }}</span>ê±´</li>
        {% endfor %}
      </ul>
    </div>
  </section>

  <!-- ì‹œìŠ¤í…œë³„ ë¦¬í¬íŠ¸ ìˆ˜ -->
  <section class="mb-8">
    <h2 class="text-xl font-semibold mb-3">5. ì‹œìŠ¤í…œë³„ ë¦¬í¬íŠ¸ ìˆ˜</h2>
    <div class="bg-gray-50 border rounded p-4">
      <ul class="list-disc pl-6 space-y-1">
        {% for system, count in system_counts.items() %}
          <li>{{ system }}: <span class="font-medium">{{ count }}</span>ê±´</li>
        {% endfor %}
      </ul>
    </div>
  </section>

    <!-- 6. ì›”ë³„ ì‘ì„± ë¦¬í¬íŠ¸ ìˆ˜ -->
  <section>
    <h2 class="text-xl font-semibold mb-3">6. ì›”ë³„ ì‘ì„± ë¦¬í¬íŠ¸ ìˆ˜</h2>
    <div class="overflow-x-auto">
      <table class="table-auto border w-full text-center">
        <thead class="bg-gray-100">
          <tr>
            <th class="border px-2 py-2">ì›”</th>
            <th class="border px-2 py-2">ì‘ì—…(MSP)</th>
            <th class="border px-2 py-2">ì¥ì• (Error)</th>
            <th class="border px-2 py-2">ì¼ì§€(Log)</th>
            <th class="border px-2 py-2">ì´í•©</th>
          </tr>
        </thead>
        <tbody>
          {% for month, counts in monthly_counts.items() %}
          <tr>
            <td class="border px-2 py-2">{{ month }}</td>
            <td class="border px-2 py-2">{{ counts.msp }}</td>
            <td class="border px-2 py-2">{{ counts.error }}</td>
            <td class="border px-2 py-2">{{ counts.log }}</td>
            <td class="border px-2 py-2">{{ counts.msp + counts.error + counts.log }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>

</main>


</body>
</html>
